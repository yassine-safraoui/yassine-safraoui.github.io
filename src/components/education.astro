---
import { marked } from "marked";
import profile from "../pages/profile";

const education = {
	title: "Education",
	items: await Promise.all(
		profile.education.items.map(async (item) => ({
			...item,
			contentHtml: (await marked(item.content)).replaceAll(
				"<a ",
				"<a data-education-content-link ",
			),
		})),
	),
};
---

<style>
  #education [data-education-index] {
    box-shadow: 0px 8px 56px rgb(15 80 100 / 16%);
  }

  #education [data-education-card] {
    box-shadow: 0px 8px 56px rgb(15 80 100 / 16%);
  }

  #education [data-education-card]:hover {
    box-shadow: 0 4px 11px rgb(15 80 100 / 16%);
  }

  #education [data-education-school-link] {
    display: inline-block;
    color: var(--text-link-color);
    text-decoration: none;
  }

  #education [data-education-school-link]::after {
    content: "";
    display: block;
    width: 0;
    height: 2px;
    bottom: 0.37em;
    background-color: var(--primary-color);
    opacity: 0.5;
    transition: all 0.25s cubic-bezier(0.645, 0.045, 0.355, 1);
  }

  #education [data-education-school-link]:hover::after,
  #education [data-education-school-link]:focus::after,
  #education [data-education-school-link]:active::after {
    width: 100%;
  }

  #education [data-education-content-link] {
    color: var(--text-link-color);
    text-decoration: none;
    opacity: 0.9;
  }
</style>

<section id="education" class="py-5">
  <div class="prose mx-auto mt-8 w-full max-w-6xl px-3 sm:px-5">
    <h1 class="text-center text-(--text-color)">
      {education.title}
    </h1>

    <div class="justify-center py-5">
      {
        education.items.map((item, index) => (
          <div class="p-0">
            <div class="m-1 mb-4 flex items-center justify-center gap-8">
              <div class="mr-2 hidden p-0 text-center md:block md:w-12">
                <div class="py-2">
                  <span
                    class="z-10 inline-flex size-13 items-center justify-center rounded-full bg-(--primary-color) leading-none font-bold text-(--background-color) opacity-80"
                    data-education-index
                  >
                    {index + 1}
                  </span>
                </div>
              </div>

              <div class="w-full md:w-9/12">
                <article
                  class="rounded-3xl border-2 border-(--text-secondary-color) bg-(--secondary-background-color) transition-all duration-300 hover:border-(--primary-color)"
                  data-education-card
                >
                  <div class="rounded-3xl p-4 md:p-8">
                    <div class="float-end text-sm text-(--text-secondary-color)">
                      {item.date}
                    </div>

                    <h5 class="text-xl font-semibold text-(--text-color)">
                      {item.title}
                    </h5>

                    {item.school.url ? (
                      <a
                        href={item.school.url}
                        target="_blank"
                        rel="noreferrer"
                        data-education-school-link
                      >
                        <h6 class="text-base text-(--text-link-color)">
                          {item.school.name}
                        </h6>
                      </a>
                    ) : (
                      <h6 class="text-base text-(--text-color)">
                        {item.school.name}
                      </h6>
                    )}

                    <div
                      class="prose max-w-fit py-1 text-(--text-secondary-color)"
                      set:html={item.contentHtml}
                    />
                  </div>
                </article>
              </div>
            </div>
          </div>
        ))
      }
    </div>
  </div>
</section>
